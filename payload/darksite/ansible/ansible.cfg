[defaults]
inventory = inventory/hosts.ini
roles_path = roles
retry_files_enabled = False
host_key_checking = True
forks = 25
timeout = 30
interpreter_python = auto_silent

# Use built-in default callback with YAML formatting (replaces deprecated community.general.yaml)
stdout_callback = default
result_format = yaml

# Minimal, deterministic output
deprecation_warnings = True
bin_ansible_callbacks = True

[privilege_escalation]
become = True
become_method = sudo
become_user = root
# Non-interactive by default (fail fast if sudo would prompt)
become_flags = -H -n
become_ask_pass = False

[ssh_connection]
ssh_args = -o ControlMaster=auto -o ControlPersist=60s -o ControlPath=~/.ansible/cp/ansible-ssh-%%h-%%p-%%r -o ServerAliveInterval=30 -o ServerAliveCountMax=3
pipelining = True


---
- name: Verify cluster health (kubectl from controller)
  hosts: "master:controller"
  connection: local
  gather_facts: false
  any_errors_fatal: false

  tasks:
    - name: Nodes
      ansible.builtin.command: kubectl get nodes -o wide
      changed_when: false

    - name: System pods
      ansible.builtin.command: kubectl get pods -A -o wide
      changed_when: false

    - name: Cilium status (non-fatal)
      ansible.builtin.command: cilium status
      changed_when: false
      failed_when: false

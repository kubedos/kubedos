- name: Read worker join command from cp1
  set_fact:
    join_worker_cmd: "{{ hostvars['cp1.unixbox.net'].join_worker.stdout }}"

- name: Join worker to cluster
  shell: >
    {{ join_worker_cmd }}
    --node-name {{ inventory_hostname }}
  args:
    creates: /etc/kubernetes/kubelet.conf


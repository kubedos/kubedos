# Inventory for unixbox cluster unit (WireGuard mgmt plane + underlay)
# Generated by KubeOS; commit this inventory with the unit.
#
# Naming:
#   cp-*  = Kubernetes control planes
#   w-*   = Kubernetes workers
#   etcd-* = external etcd cluster
#   lb-*  = kube-apiserver L4 load balancers (HAProxy)
#   prometheus/grafana/storage = external services
#
# Compatibility groups:
#   control_plane -> cp
#   workers       -> w
#
# Planes (example):
#   mgmt (wg1):  10.78.0.0/24  (Ansible/SSH/control)
#   underlay:    10.100.10.0/24 (hypervisor fabric / default route)
#
[all]
etcd-1.unixbox.net
etcd-2.unixbox.net
etcd-3.unixbox.net
lb-1.unixbox.net
lb-2.unixbox.net
lb-3.unixbox.net
prometheus.unixbox.net
grafana.unixbox.net
storage.unixbox.net
cp-1.unixbox.net
cp-2.unixbox.net
cp-3.unixbox.net
w-1.unixbox.net
w-2.unixbox.net
w-3.unixbox.net

[etcd]
etcd-1.unixbox.net
etcd-2.unixbox.net
etcd-3.unixbox.net

[lb]
lb-1.unixbox.net
lb-2.unixbox.net
lb-3.unixbox.net

[monitoring]
prometheus.unixbox.net
grafana.unixbox.net

[storage]
storage.unixbox.net

[cp]
cp-1.unixbox.net
cp-2.unixbox.net
cp-3.unixbox.net

[w]
w-1.unixbox.net
w-2.unixbox.net
w-3.unixbox.net

# Canonical Kubernetes group
[k8s:children]
cp
w

# Compatibility groups (avoid host-pattern drift)
[control_plane:children]
cp

[workers:children]
w

# Local controller (Ansible host) - optional
[master]
master ansible_connection=local

[all:vars]
ansible_user=ansible
ansible_ssh_common_args='-o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null'
# Deterministic privilege escalation: fail fast if sudo would prompt.
# Override for bootstrap with: -e 'ansible_become_flags=-H -S'
ansible_become=true
ansible_become_method=sudo
ansible_become_flags=-H -n

# Cluster constants
cluster_domain=unixbox.net
cluster_name=unixbox

# kube-apiserver VIP / endpoint (through LBs)
k8s_api_endpoint=10.78.0.100

# Underlay gateway and VLAN/bridge details belong in group_vars/all/*.yml
# (Do not embed topology in inventory; keep it declarative in group_vars.)


# inventory/group_vars/all.yml

---
# Base networking intent:
# - Ansible reaches hosts via ansible_host (10.78 mgmt WG)
# - Kubernetes binds to k8s_node_ip (10.100 cluster NIC)
#
# You set k8s_node_ip per-host in inventory.

# ---- Kubernetes repo channel/minor ----
# pkgs.k8s.io requires a minor path (e.g. stable:/v1.31).
# Bump this when YOU want to move to the next Kubernetes minor.
kubernetes_repo_channel: "stable"
kubernetes_repo_minor: "v1.31"

# ---- Kubernetes package version selection ----
# "auto" = choose newest available from apt cache (from pkgs.k8s.io repo),
# then hold kubelet/kubeadm/kubectl so nodes remain consistent.
kubernetes_apt_version: "auto"

# Optional: allow you to override version explicitly if needed.
# Example: "1.31.14-1.1"
kubernetes_apt_version_override: ""

# ---- Kubelet binding ----
# Force kubelet to use the cluster NIC (10.100) for Node/InternalIP.
kubelet_pin_node_ip: true

# ---- Container runtime ----
container_runtime: "containerd"

# ---- System prereqs (these MUST be true for kubeadm) ----
k8s_disable_swap: true
k8s_enable_ip_forward: true
k8s_load_kernel_modules: true

# ---- CNI MTU note ----
# Keep your MTU handling in Cilium config; do not “guess” it here.
# This playbook just ensures kubelet binds to k8s_node_ip.

